{"name":"Client Credentials Flow","tags":["auth"],"cells":[{"id":"ba779b9f-745a-4a6a-9253-4400b85689be","type":"markdown","value":"#Client Credentials Flow\n\nClient get get access by OAuth 2.0 Client Credentials flow\n\nTo start you have to register in Aidbox OAuth Client with secret and client_credentials flow enabled\n\nBefore you start - create a client and policy for this client","folded":{"code":true,"result":false},"result":"<h1>Client Credentials Flow</h1><p>Client get get access by OAuth 2.0 Client Credentials flow</p><p>To start you have to register in Aidbox OAuth Client with secret and client_credentials flow enabled</p><p>Before you start - create a client and policy for this client</p>"},{"id":"96e23490-781f-4d71-8873-189c7fd7e9aa","type":"rest","value":"PUT Client/auth-client\ncontent-type: text/yaml\naccept: text/yaml\n\nsecret: verysecret\ngrant_types:\n  - client_credentials\n#auth:\n#  client_credentials:\n#    access_token_expiration: 1000\n#    token_format: jwt\n#    refresh_token: true"},{"id":"33ece2dd-52c5-428e-b6f1-675b1bb63af9","type":"rest","value":"PUT AccessPolicy/auth-client\ncontent-type: text/yaml\naccept: text/yaml\n\nengine: allow\nlink:\n  - id: auth-client\n    resourceType: Client"},{"id":"b80429ea-e54f-4615-8e9a-a7774af8a676","type":"markdown","value":"**Get Token**","folded":{"code":true,"result":false},"result":"<p><strong>Get Token</strong></p>"},{"id":"f7719ca2-9e66-44e0-8240-8c153abcefa8","type":"rest","value":"POST /auth/token\ncontent-type: text/yaml\naccept: text/yaml\n\nclient_id: auth-client\nclient_secret: verysecret\ngrant_type: client_credentials\n#audience: http://resource.server.com UNCOMMENT IF YOU USING JWT TOKEN TYPE"},{"id":"0a876d27-67bb-4f4f-ae4d-001bb04737da","type":"markdown","value":"**Close session**","folded":{"code":true,"result":false},"result":"<p><strong>Close session</strong></p>"},{"id":"05d36943-f6a1-4679-9113-7be988d4d201","type":"rest","value":"DELETE /Session\nAuthorization: Bearer <PLACE_YOUR_TOKEN_HERE>","folded":{"result":false}},{"id":"a6f1048f-2cc5-46ae-b8a4-abb58e44d02c","type":"markdown","value":"**Now using this access token we can query Aidbox**","folded":{"code":true,"result":false},"result":"<p><strong>Now using this access token we can query Aidbox</strong></p>"},{"id":"9552919b-474d-4af2-a97f-5afcf8181dc0","type":"rest","value":"GET /Patient\nAuthorization: Bearer <PLACE_YOUR_TOKEN_HERE>"}],"description":"This notebook is showing how to authorize via client credentials.","id":"32a2e1ab-78c4-43f3-b6d5-3c412a4d5904","resourceType":"Notebook","meta":{"lastUpdated":"2021-08-12T10:52:47.367629Z","createdAt":"2021-08-12T10:35:06.418185Z","versionId":"552"}}
