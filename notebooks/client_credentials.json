{
    "name": "Client Credentials",
    "description": "This notebook is showing how to authorize via client credentials.",
    "cells": [
        {
            "id": "c5edd104-036d-428b-963d-35420eb3f222",
            "type": "markdown",
            "value": "#Client Credentials Flow",
            "folded": {
                "code": true,
                "result": false
            },
            "result": "<h1>Client Credentials Flow</h1>"
        },
        {
            "id": "770a218c-6d1b-4f05-b38e-15d98ca1fd86",
            "type": "markdown",
            "value": "Client get get access by OAuth 2.0 Client Credentials flow",
            "folded": {
                "code": true,
                "result": false
            },
            "result": "<p>Client get get access by OAuth 2.0 Client Credentials flow</p>"
        },
        {
            "id": "99a04891-528b-4ce7-a8c7-a12735e759b1",
            "type": "rest",
            "value": "PUT Client/auth-client?_pretty=true\ncontent-type: text/yaml\naccept: text/yaml\n\nsecret: verysecret\ngrant_types:\n  - client_credentials",
            "folded": {
                "result": false
            },
            "result": {
                "body": "secret: verysecret\ngrant_types: [client_credentials]\nid: auth-client?_pretty=true\nresourceType: Client\nmeta: {lastUpdated: '2021-08-10T07:43:02.902733Z', createdAt: '2021-08-10T07:43:02.902733Z', versionId: '52'}\n",
                "status": 201,
                "headers": {
                    "etag": "52",
                    "location": "/Client/auth-client?_pretty=true/_history/52",
                    "x-duration": 7,
                    "content-type": "text/yaml",
                    "x-request-id": "64eabafa-f0f6-4261-9aed-9584102468d1",
                    "cache-control": "no-cache",
                    "last-modified": "Tue, 10 Aug 2021 07:43:02 GMT"
                }
            }
        },
        {
            "id": "a91a56a5-c3ff-4ad0-a5cb-6e15ae6beff8",
            "type": "markdown",
            "value": "And policy for this client",
            "folded": {
                "code": true,
                "result": false
            },
            "result": "<p>And policy for this client</p>"
        },
        {
            "id": "60fcecf8-63db-4735-a473-7d490a66e7e1",
            "type": "rest",
            "value": "PUT AccessPolicy/auth-client?_pretty=true\ncontent-type: text/yaml\naccept: text/yaml\n\nengine: allow\nlink:\n  - id: auth-client\n    resourceType: Client",
            "folded": {
                "code": true,
                "result": false
            },
            "result": {
                "body": "link:\n- {id: auth-client, resourceType: Client}\nengine: allow\nid: auth-client?_pretty=true\nresourceType: AccessPolicy\nmeta: {lastUpdated: '2021-08-10T07:43:32.413374Z', createdAt: '2021-08-10T07:43:32.413374Z', versionId: '53'}\n",
                "status": 201,
                "headers": {
                    "etag": "53",
                    "location": "/AccessPolicy/auth-client?_pretty=true/_history/53",
                    "x-duration": 6,
                    "content-type": "text/yaml",
                    "x-request-id": "58248122-1d30-4b8a-a13b-5364775a049e",
                    "cache-control": "no-cache",
                    "last-modified": "Tue, 10 Aug 2021 07:43:32 GMT"
                }
            }
        },
        {
            "id": "856055a7-cf0e-4c3c-b7af-cbb67502b735",
            "type": "rest",
            "value": "POST /auth/token\nContent-Type: application/json\n\n{\n \"client_id\": \"auth-client\",\n \"client_secret\": \"verysecret\",\n \"grant_type\": \"client_credentials\"\n}",
            "folded": {
                "result": false
            },
            "result": {
                "body": "{\"token_type\":\"Bearer\",\"access_token\":\"YTRlYjM2Y2EtMmQ4Zi00MjVmLWFlZWItYjNlMWY1ZGJmOWI1\"}",
                "status": 200,
                "headers": {
                    "pragma": "no-cache",
                    "x-duration": 19,
                    "content-type": "application/json",
                    "x-request-id": "ca1af49b-4a38-4f36-b15d-45d9d743c2f1",
                    "cache-control": "no-cache, no-store, max-age=0, must-revalidate"
                }
            }
        },
        {
            "id": "7c4e2fd8-bc51-4d27-bb14-4b774edf8be3",
            "type": "rest",
            "value": "GET /Patient",
            "folded": {
                "result": false
            },
            "result": {
                "body": "{\"query-time\":1,\"meta\":{\"versionId\":\"54\"},\"type\":\"searchset\",\"resourceType\":\"Bundle\",\"total\":0,\"link\":[{\"relation\":\"first\",\"url\":\"/Patient?page=1\"},{\"relation\":\"self\",\"url\":\"/Patient?page=1\"}],\"query-timeout\":60000,\"entry\":[],\"query-sql\":[\"SELECT \\\"patient\\\".* FROM \\\"patient\\\" LIMIT ? OFFSET ? \",100,0]}",
                "status": 200,
                "headers": {
                    "etag": "54",
                    "x-duration": 1,
                    "content-type": "application/json",
                    "x-request-id": "ce05aec0-42b5-4f26-8756-0fe18d2b23d6"
                }
            }
        },
        {
            "id": "ec9ba006-b468-4883-af6d-fab0500d4114",
            "type": "rest",
            "value": "DELETE /Session",
            "folded": {
                "result": false
            },
            "result": {
                "body": "{\"message\":\"Session was not found\"}",
                "status": 404,
                "headers": {
                    "x-duration": 1,
                    "content-type": "application/json",
                    "x-request-id": "66d48be2-553e-40e1-9a11-53006fa47539"
                }
            }
        }
    ],
    "id": "7b2d521f-047b-4f51-acc9-501c41c344bc",
    "resourceType": "Notebook",
    "meta": {
        "lastUpdated": "2021-08-10T07:45:12.099910Z",
        "createdAt": "2021-08-10T07:45:12.099910Z",
        "versionId": "55"
    }
}

