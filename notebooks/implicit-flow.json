{"name":"Implicit flow","cells":[{"id":"a63dfc35-a9e6-4e86-9115-c6b9c1042db8","type":"markdown","value":"In this guide we are using Aidbox REST Mock feature which is useful e.g. debugging purposes.\n\nIt stores the last request to the given mock endpoint.\n\nHere we'll create mock endpoint with the URL: /mock/auth-tutorial-implicit","folded":{"code":true,"result":false},"result":"<p>In this guide we are using Aidbox REST Mock feature which is useful e.g. debugging purposes.</p><p>It stores the last request to the given mock endpoint.</p><p>Here we'll create mock endpoint with the URL: /mock/auth-tutorial-implicit</p>"},{"id":"4356a5ae-7c66-4cde-a3ef-35a4ff903d64","type":"rpc","value":"{\n  \"method\": \"aidbox.mock/mock-create\",\n  \"params\": {\n    \"id\": \"auth-tutorial-implicit\",\n    \"request-method\": \"get\",\n    \"response\": {\n      \"status\": 200\n    }\n  }\n}","folded":{"result":false},"result":"{\"result\":\"ok\"}"},{"id":"aaa39da2-76c7-4f32-8bde-23b2424433ca","type":"markdown","value":"Now we need to create a Client for which we will get token","folded":{"code":true,"result":false},"result":"<p>Now we need to create a Client for which we will get token</p>"},{"id":"7de6e807-0019-4fa4-bb29-e40a0994163b","type":"rest","value":"PUT /Client/spa-app\ncontent-type: text/yaml\naccept: text/yaml\n\ngrant_types:\n  - implicit\nauth:\n  implicit:\n    redirect_uri: http://localhost:8765/mock/auth-tutorial-implicit","folded":{"result":false},"result":{"body":"auth:\n  implicit: {redirect_uri: 'http://localhost:8765/mock/auth-tutorial-implicit'}\ngrant_types: [implicit]\nid: spa-app\nresourceType: Client\nmeta: {lastUpdated: '2021-08-17T12:34:48.735471Z', createdAt: '2021-08-17T12:34:48.735471Z', versionId: '843'}\n","status":201,"headers":{"etag":"843","location":"/Client/spa-app/_history/843","x-duration":6,"content-type":"text/yaml","x-request-id":"d89431b5-3bf6-4cdd-af12-90e572baee55","cache-control":"no-cache","last-modified":"Tue, 17 Aug 2021 12:34:48 GMT"}}},{"id":"7e165399-e933-46dc-99f1-694f71e9ab83","type":"markdown","value":"To authorize the client vizit [/auth/authorize?client\\_id=spa-app&response\\_type=token](/auth/authorize?client_id=spa-app&response_type=token)","folded":{"result":false},"result":"<p>To authorize the client vizit <a href='/auth/authorize?client_id=spa-app&response_type=token'>/auth/authorize?client&#95;id=spa-app&response&#95;type=token</a></p>"},{"id":"dc8b68b4-c84f-43f1-a80a-893e57189d23","type":"markdown","value":"In **the** address bar of your browser you will see access token after the `#` sign. E.g.\n`http://localhost:8765/mock/auth-tutorial-implicit#`**`access_token=MzIxOGY2ZTUtNGI2Yy00MzRhLTgzYjQtMTI0N2NmNThjNWIw`**","folded":{"result":false},"result":"<p>In <strong>the</strong> address bar of your browser you will see access token after the <code>#</code> sign. E.g. <code>http://localhost:8765/mock/auth-tutorial-implicit#</code><strong><code>access&#95;token=MzIxOGY2ZTUtNGI2Yy00MzRhLTgzYjQtMTI0N2NmNThjNWIw</code></strong></p>"},{"id":"b8155400-abcd-4660-abf1-185f674723cd","type":"markdown","value":"Now we can use the token to make requests with the client","folded":{"code":true,"result":false},"result":"<p>Now we can use the token to make requests with the client</p>"},{"id":"c3ab455c-f0b0-410d-9e03-5336674be7db","type":"rest","value":"GET /Patient\nauthorization: Bearer MzIxOGY2ZTUtNGI2Yy00MzRhLTgzYjQtMTI0N2NmNThjNWIw","folded":{"result":false},"result":{"body":"{\"query-time\":5,\"meta\":{\"versionId\":\"847\"},\"type\":\"searchset\",\"resourceType\":\"Bundle\",\"total\":9,\"link\":[{\"relation\":\"first\",\"url\":\"/Patient?page=1\"},{\"relation\":\"self\",\"url\":\"/Patient?page=1\"}],\"query-timeout\":60000,\"entry\":[{\"resource\":{\"name\":[{\"family\":\"John\"}],\"id\":\"pt-2\",\"resourceType\":\"Patient\",\"meta\":{\"lastUpdated\":\"2021-08-03T11:16:43.948207Z\",\"createdAt\":\"2021-08-03T11:16:43.948207Z\",\"versionId\":\"322\"}},\"fullUrl\":\"http://localhost:8765/Patient/pt-2\",\"link\":[{\"relation\":\"self\",\"url\":\"http://localhost:8765/Patient/pt-2\"}]},{\"resource\":{\"name\":[{\"given\":[\"Jane2\"]}],\"id\":\"pt-1\",\"resourceType\":\"Patient\",\"meta\":{\"lastUpdated\":\"2021-08-02T10:22:33.373604Z\",\"createdAt\":\"2021-08-02T10:22:33.373604Z\",\"versionId\":\"241\"}},\"fullUrl\":\"http://localhost:8765/Patient/pt-1\",\"link\":[{\"relation\":\"self\",\"url\":\"http://localhost:8765/Patient/pt-1\"}]},{\"resource\":{\"id\":\"45fa51db-1846-44a5-b087-7c70dab0b9ec\",\"resourceType\":\"Patient\",\"meta\":{\"lastUpdated\":\"2021-08-05T13:58:24.210981Z\",\"createdAt\":\"2021-08-05T13:58:24.210981Z\",\"versionId\":\"400\"}},\"fullUrl\":\"http://localhost:8765/Patient/45fa51db-1846-44a5-b087-7c70dab0b9ec\",\"link\":[{\"relation\":\"self\",\"url\":\"http://localhost:8765/Patient/45fa51db-1846-44a5-b087-7c70dab0b9ec\"}]},{\"resource\":{\"id\":\"351a7851-3d27-4235-85c9-e394c1eb65b5\",\"resourceType\":\"Patient\",\"meta\":{\"lastUpdated\":\"2021-08-05T14:01:12.302393Z\",\"createdAt\":\"2021-08-05T14:01:12.302393Z\",\"versionId\":\"407\"}},\"fullUrl\":\"http://localhost:8765/Patient/351a7851-3d27-4235-85c9-e394c1eb65b5\",\"link\":[{\"relation\":\"self\",\"url\":\"http://localhost:8765/Patient/351a7851-3d27-4235-85c9-e394c1eb65b5\"}]},{\"resource\":{\"id\":\"a513fa8c-a99e-4384-8009-0be646208b82\",\"resourceType\":\"Patient\",\"meta\":{\"lastUpdated\":\"2021-08-05T14:12:33.543328Z\",\"createdAt\":\"2021-08-05T14:12:33.543328Z\",\"versionId\":\"425\"}},\"fullUrl\":\"http://localhost:8765/Patient/a513fa8c-a99e-4384-8009-0be646208b82\",\"link\":[{\"relation\":\"self\",\"url\":\"http://localhost:8765/Patient/a513fa8c-a99e-4384-8009-0be646208b82\"}]},{\"resource\":{\"id\":\"609adea4-fa19-49ee-be09-76728c395ef9\",\"resourceType\":\"Patient\",\"meta\":{\"lastUpdated\":\"2021-08-05T14:36:29.704095Z\",\"createdAt\":\"2021-08-05T14:36:29.704095Z\",\"versionId\":\"446\"}},\"fullUrl\":\"http://localhost:8765/Patient/609adea4-fa19-49ee-be09-76728c395ef9\",\"link\":[{\"relation\":\"self\",\"url\":\"http://localhost:8765/Patient/609adea4-fa19-49ee-be09-76728c395ef9\"}]},{\"resource\":{\"id\":\"53eaa7e6-a92c-4e19-96a2-ebaab1c0fc5e\",\"resourceType\":\"Patient\",\"meta\":{\"lastUpdated\":\"2021-08-05T14:36:33.925324Z\",\"createdAt\":\"2021-08-05T14:36:33.925324Z\",\"versionId\":\"448\"}},\"fullUrl\":\"http://localhost:8765/Patient/53eaa7e6-a92c-4e19-96a2-ebaab1c0fc5e\",\"link\":[{\"relation\":\"self\",\"url\":\"http://localhost:8765/Patient/53eaa7e6-a92c-4e19-96a2-ebaab1c0fc5e\"}]},{\"resource\":{\"id\":\"9d134068-162c-453c-9f40-fe5cfa495c35\",\"resourceType\":\"Patient\",\"meta\":{\"lastUpdated\":\"2021-08-05T14:37:30.648297Z\",\"createdAt\":\"2021-08-05T14:37:30.648297Z\",\"versionId\":\"452\"}},\"fullUrl\":\"http://localhost:8765/Patient/9d134068-162c-453c-9f40-fe5cfa495c35\",\"link\":[{\"relation\":\"self\",\"url\":\"http://localhost:8765/Patient/9d134068-162c-453c-9f40-fe5cfa495c35\"}]},{\"resource\":{\"id\":\"pt-3\",\"resourceType\":\"Patient\",\"meta\":{\"lastUpdated\":\"2021-08-12T07:45:08.409591Z\",\"createdAt\":\"2021-08-12T07:45:08.409591Z\",\"versionId\":\"541\"}},\"fullUrl\":\"http://localhost:8765/Patient/pt-3\",\"link\":[{\"relation\":\"self\",\"url\":\"http://localhost:8765/Patient/pt-3\"}]}],\"query-sql\":[\"SELECT \\\"patient\\\".* FROM \\\"patient\\\" LIMIT ? OFFSET ? \",100,0]}","status":200,"headers":{"etag":"847","x-duration":21,"content-type":"application/json","x-request-id":"8ff8a69c-f70c-4227-8a82-b1e7611989ba"}}},{"id":"b62675f7-09ab-4513-885e-fb40cc01b80e","type":"markdown","value":"To delete a token, make a `DELETE` request to the `/Session` endpoint","folded":{"code":true,"result":false},"result":"<p>To delete a token, make a <code>DELETE</code> request to the <code>/Session</code> endpoint</p>"},{"id":"4ded72d0-a386-42c4-9c12-22330126c1c4","type":"rest","value":"DELETE /Session\nauthorization: Bearer MzIxOGY2ZTUtNGI2Yy00MzRhLTgzYjQtMTI0N2NmNThjNWIw","folded":{"result":false},"result":{"body":"{\"message\":\"Session [155f17f8-1f70-46b7-a99c-6c1c616ac460] was closed\"}","status":200,"headers":{"Set-Cookie":["asid=;Path=/;Expires=Thu, 01 Jan 1970 00:00:00 GMT"],"x-duration":7,"content-type":"application/json","x-request-id":"576b3666-3213-4699-b38f-cf94517ef6e9"}}},{"id":"fb780725-a517-495d-9033-ff75641b88a8","type":"markdown","value":"After the session closed, all requests requiring authentication with this token are rejected","folded":{"code":true,"result":false},"result":"<p>After the session closed, all requests requiring authentication with this token are rejected</p>"},{"id":"0a03df91-8b93-4505-a071-6dcb79346112","type":"rest","value":"GET /Patient\nauthorization: Bearer MzIxOGY2ZTUtNGI2Yy00MzRhLTgzYjQtMTI0N2NmNThjNWIw","folded":{"result":false},"result":{"body":"{\"message\":\"No session for passed bearer token or no TokenIntrospectors with type='opaque' was able to validate it\"}","status":401,"headers":{"pragma":"no-cache","x-duration":3,"content-type":"application/json","x-request-id":"1d1aa1be-8d2b-4540-af4b-b6313f94f011","cache-control":"no-cache, no-store, max-age=0, must-revalidate"}}}],"description":"Useful for single page apps","id":"9a4acf1b-a970-4710-a473-1557f2f0ce09","resourceType":"Notebook","meta":{"lastUpdated":"2021-08-17T12:44:50.859058Z","createdAt":"2021-08-17T12:38:43.173699Z","versionId":"850"},"tags":["auth"]}
